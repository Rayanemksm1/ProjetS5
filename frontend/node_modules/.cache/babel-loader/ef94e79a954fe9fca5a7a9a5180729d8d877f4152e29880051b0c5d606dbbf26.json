{"ast":null,"code":"var _jsxFileName = \"/home/rayane/Bureau/hoptal_rdv/frontend/src/EditAppointmentForm.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction EditAppointmentForm({\n  appointment,\n  onClose,\n  onUpdated\n}) {\n  _s();\n  const [doctors, setDoctors] = useState([]);\n  const [patientName, setPatientName] = useState(appointment.patient_name);\n  const [doctorId, setDoctorId] = useState(appointment.doctor);\n  const [dateTime, setDateTime] = useState(appointment.date_time);\n\n  // Récupérer la liste des médecins\n  useEffect(() => {\n    fetch(\"http://127.0.0.1:8000/api/doctors/\").then(res => res.json()).then(data => setDoctors(data));\n  }, []);\n  const handleSubmit = e => {\n    e.preventDefault();\n    fetch(`http://127.0.0.1:8000/api/appointments/${appointment.id}/`, {\n      method: \"PUT\",\n      // ou PATCH si tu veux mettre à jour partiellement\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        patient_name: patientName,\n        doctor: doctorId,\n        date_time: dateTime\n      })\n    }).then(res => res.json()).then(data => {\n      console.log(\"Rendez-vous mis à jour :\", data);\n      onUpdated(); // permet de rafraîchir la liste\n      onClose(); // fermer le formulaire\n    }).catch(err => console.error(err));\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"edit-form\",\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      children: \"Modifier le rendez-vous\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        value: patientName,\n        onChange: e => setPatientName(e.target.value),\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 41,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        value: doctorId,\n        onChange: e => setDoctorId(e.target.value),\n        required: true,\n        children: doctors.map(d => /*#__PURE__*/_jsxDEV(\"option\", {\n          value: d.id,\n          children: d.name\n        }, d.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 49,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"datetime-local\",\n        value: dateTime,\n        onChange: e => setDateTime(e.target.value),\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        children: \"Modifier\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        onClick: onClose,\n        children: \"Annuler\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 38,\n    columnNumber: 5\n  }, this);\n}\n_s(EditAppointmentForm, \"avigoNrEYMBVN43+SS86Hdsom6I=\");\n_c = EditAppointmentForm;\nexport default EditAppointmentForm;\nvar _c;\n$RefreshReg$(_c, \"EditAppointmentForm\");","map":{"version":3,"names":["React","useState","useEffect","jsxDEV","_jsxDEV","EditAppointmentForm","appointment","onClose","onUpdated","_s","doctors","setDoctors","patientName","setPatientName","patient_name","doctorId","setDoctorId","doctor","dateTime","setDateTime","date_time","fetch","then","res","json","data","handleSubmit","e","preventDefault","id","method","headers","body","JSON","stringify","console","log","catch","err","error","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","type","value","onChange","target","required","map","d","name","onClick","_c","$RefreshReg$"],"sources":["/home/rayane/Bureau/hoptal_rdv/frontend/src/EditAppointmentForm.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\n\nfunction EditAppointmentForm({ appointment, onClose, onUpdated }) {\n  const [doctors, setDoctors] = useState([]);\n  const [patientName, setPatientName] = useState(appointment.patient_name);\n  const [doctorId, setDoctorId] = useState(appointment.doctor);\n  const [dateTime, setDateTime] = useState(appointment.date_time);\n\n  // Récupérer la liste des médecins\n  useEffect(() => {\n    fetch(\"http://127.0.0.1:8000/api/doctors/\")\n      .then(res => res.json())\n      .then(data => setDoctors(data));\n  }, []);\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n\n    fetch(`http://127.0.0.1:8000/api/appointments/${appointment.id}/`, {\n      method: \"PUT\", // ou PATCH si tu veux mettre à jour partiellement\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify({\n        patient_name: patientName,\n        doctor: doctorId,\n        date_time: dateTime,\n      }),\n    })\n    .then(res => res.json())\n    .then(data => {\n      console.log(\"Rendez-vous mis à jour :\", data);\n      onUpdated(); // permet de rafraîchir la liste\n      onClose();   // fermer le formulaire\n    })\n    .catch(err => console.error(err));\n  };\n\n  return (\n    <div className=\"edit-form\">\n      <h3>Modifier le rendez-vous</h3>\n      <form onSubmit={handleSubmit}>\n        <input\n          type=\"text\"\n          value={patientName}\n          onChange={e => setPatientName(e.target.value)}\n          required\n        />\n        <select value={doctorId} onChange={e => setDoctorId(e.target.value)} required>\n          {doctors.map(d => (\n            <option key={d.id} value={d.id}>{d.name}</option>\n          ))}\n        </select>\n        <input\n          type=\"datetime-local\"\n          value={dateTime}\n          onChange={e => setDateTime(e.target.value)}\n          required\n        />\n        <button type=\"submit\">Modifier</button>\n        <button type=\"button\" onClick={onClose}>Annuler</button>\n      </form>\n    </div>\n  );\n}\n\nexport default EditAppointmentForm;\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}